<div class="pfm-container" style="padding: 2rem 0;">
  <!-- Page Heading -->
  <div class="pfm-flex" style="justify-content: space-between; align-items: flex-end; margin-bottom: 2rem; flex-wrap: wrap; gap: 1rem;">
    <div>
      <h2 style="font-size: 2rem; font-weight: 800; margin-bottom: 0.5rem;">Transactions</h2>
      <p class="pfm-text-muted">Manage your income and expenses</p>
    </div>
    <button class="pfm-btn pfm-btn-primary" ng-click="$ctrl.addTransaction()">
      <span style="font-size: 1.25rem; margin-right: 0.5rem;">+</span>
      New Transaction
    </button>
  </div>
  
  <!-- Summary Stats -->
  <div class="pfm-grid pfm-grid-cols-3 pfm-mb-4">
    <div class="pfm-stat-card">
      <div class="pfm-flex" style="justify-content: space-between; align-items: center;">
        <p class="pfm-stat-label">Total Income</p>
        <span style="color: var(--pfm-success); font-size: 0.875rem;">‚Üó</span>
      </div>
      <p class="pfm-stat-value" style="font-size: 1.5rem;">$4,250.00</p>
      <p class="pfm-text-success" style="font-size: 0.75rem; font-weight: 600;">+12% from last month</p>
    </div>
    <div class="pfm-stat-card">
      <div class="pfm-flex" style="justify-content: space-between; align-items: center;">
        <p class="pfm-stat-label">Total Expenses</p>
        <span style="color: var(--pfm-error); font-size: 0.875rem;">‚Üò</span>
      </div>
      <p class="pfm-stat-value" style="font-size: 1.5rem;">$2,120.50</p>
      <p class="pfm-text-error" style="font-size: 0.75rem; font-weight: 600;">-5% from last month</p>
    </div>
    <div class="pfm-stat-card">
      <div class="pfm-flex" style="justify-content: space-between; align-items: center;">
        <p class="pfm-stat-label">Net Balance</p>
        <span style="font-size: 1.5rem;">üí∞</span>
      </div>
      <p class="pfm-stat-value" style="font-size: 1.5rem;">$2,129.50</p>
      <p class="pfm-text-success" style="font-size: 0.75rem; font-weight: 600;">+8% efficiency</p>
    </div>
  </div>
  
  <!-- Filters / Toolbar -->
  <div class="pfm-card pfm-mb-3" style="padding: 1rem;">
    <div class="pfm-flex" style="justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem;">
      <div class="pfm-flex" style="gap: 0.75rem; flex-wrap: wrap;">
        <!-- Date Range Filter -->
        <div class="pfm-flex" style="align-items: center; gap: 0.5rem; padding: 0.5rem 0.875rem; background: var(--pfm-bg-light); border: 1px solid var(--pfm-border-light); border-radius: 0.5rem;">
          <span style="font-size: 1rem;">üìÖ</span>
          <span style="font-size: 0.875rem; font-weight: 500;">Oct 1 - Oct 31, 2023</span>
          <span style="font-size: 0.875rem; color: var(--pfm-text-muted); cursor: pointer;">‚ñº</span>
        </div>
        
        <!-- Category Filter -->
        <select class="pfm-form-control" ng-model="$ctrl.selectedCategory" ng-change="$ctrl.filterTransactions()" style="width: auto; min-width: 10rem;">
          <option value="">All Categories</option>
          <option ng-repeat="cat in $ctrl.categories" value="{{ cat.name }}">{{ cat.name }}</option>
        </select>
        
        <!-- Type Filter -->
        <select class="pfm-form-control" ng-model="$ctrl.selectedType" ng-change="$ctrl.filterTransactions()" style="width: auto;">
          <option value="">All Types</option>
          <option value="income">Income</option>
          <option value="expense">Expense</option>
        </select>
      </div>
      
      <div class="pfm-flex" style="gap: 0.5rem;">
        <button class="pfm-btn pfm-btn-secondary pfm-btn-sm" ng-click="$ctrl.exportTransactions()">
          üì• Export
        </button>
        <button class="pfm-btn pfm-btn-secondary pfm-btn-sm" ng-click="$ctrl.printTransactions()">
          üñ®Ô∏è Print
        </button>
      </div>
    </div>
  </div>
  
  <!-- Loading State -->
  <pfm-loading-spinner ng-if="$ctrl.loading" message="Loading transactions..."></pfm-loading-spinner>
  
  <!-- Transactions Table -->
  <div ng-if="!$ctrl.loading" class="pfm-card" style="padding: 0; overflow: hidden;">
    <div style="overflow-x: auto;">
      <table class="pfm-table" style="border: none;">
        <thead>
          <tr>
            <th>Date</th>
            <th>Category</th>
            <th>Description</th>
            <th style="text-align: right;">Amount</th>
            <th style="text-align: center;">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat="transaction in $ctrl.filteredTransactions" style="position: relative;">
            <td style="white-space: nowrap; font-size: 0.875rem;">{{ $ctrl.formatDate(transaction.date) }}</td>
            <td>
              <span class="pfm-badge" ng-class="{\'pfm-badge-success\': transaction.type === \'income\', \'pfm-badge-primary\': transaction.type === \'expense\'}" style="display: inline-flex; align-items: center; gap: 0.375rem;">
                <span style="font-size: 0.875rem;">{{ $ctrl.getCategoryIcon(transaction.category) }}</span>
                {{ transaction.category }}
              </span>
            </td>
            <td class="pfm-text-muted" style="font-size: 0.875rem;">{{ transaction.description }}</td>
            <td style="text-align: right; white-space: nowrap;">
              <span style="font-size: 0.875rem; font-weight: 700;" ng-class="{\'pfm-text-success\': transaction.type === \'income\', \'pfm-text-error\': transaction.type === \'expense\'}">
                {{ transaction.amount > 0 ? "+" : "" }}{{ $ctrl.formatCurrency(transaction.amount) }}
              </span>
            </td>
            <td style="text-align: center; white-space: nowrap;">
              <div class="pfm-flex" style="justify-content: center; gap: 0.25rem;">
                <button class="pfm-btn pfm-btn-secondary pfm-btn-sm" style="padding: 0.25rem 0.5rem;" ng-click="$ctrl.editTransaction(transaction)">
                  ‚úèÔ∏è
                </button>
                <button class="pfm-btn pfm-btn-secondary pfm-btn-sm" style="padding: 0.25rem 0.5rem;" ng-click="$ctrl.deleteTransaction(transaction)">
                  üóëÔ∏è
                </button>
              </div>
            </td>
          </tr>
          <tr ng-if="!$ctrl.filteredTransactions || $ctrl.filteredTransactions.length === 0">
            <td colspan="5" class="pfm-text-center pfm-text-muted" style="padding: 3rem;">
              No transactions found
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    
    <!-- Pagination -->
    <div class="pfm-flex" style="justify-content: space-between; align-items: center; padding: 1rem 1.5rem; border-top: 1px solid var(--pfm-border-light);">
      <p class="pfm-text-muted" style="font-size: 0.75rem;">
        Showing {{ $ctrl.filteredTransactions.length }} of {{ $ctrl.transactions.length }} entries
      </p>
      <div class="pfm-flex" style="gap: 0.5rem;">
        <button class="pfm-btn pfm-btn-secondary pfm-btn-sm">Previous</button>
        <button class="pfm-btn pfm-btn-primary pfm-btn-sm">1</button>
        <button class="pfm-btn pfm-btn-secondary pfm-btn-sm">2</button>
        <button class="pfm-btn pfm-btn-secondary pfm-btn-sm">3</button>
        <button class="pfm-btn pfm-btn-secondary pfm-btn-sm">Next</button>
      </div>
    </div>
  </div>
</div>
